{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { isRef, unref, computed, defineComponent, shallowRef, watch } from 'vue';\nimport { withConfirm, withError, withInfo, withSuccess, withWarn } from '../confirm';\nimport HookModal from './HookModal';\nimport destroyFns from '../destroyFns';\nvar uuid = 0;\nvar ElementsHolder = defineComponent({\n  name: 'ElementsHolder',\n  inheritAttrs: false,\n  setup: function setup(_, _ref) {\n    var expose = _ref.expose;\n    var modals = shallowRef([]);\n    var addModal = function addModal(modal) {\n      modals.value.push(modal);\n      modals.value = modals.value.slice();\n      return function () {\n        modals.value = modals.value.filter(function (currentModal) {\n          return currentModal !== modal;\n        });\n      };\n    };\n    expose({\n      addModal: addModal\n    });\n    return function () {\n      return modals.value.map(function (modal) {\n        return modal();\n      });\n    };\n  }\n});\nfunction useModal() {\n  var holderRef = shallowRef(null);\n  // ========================== Effect ==========================\n  var actionQueue = shallowRef([]);\n  watch(actionQueue, function () {\n    if (actionQueue.value.length) {\n      var cloneQueue = _toConsumableArray(actionQueue.value);\n      cloneQueue.forEach(function (action) {\n        action();\n      });\n      actionQueue.value = [];\n    }\n  }, {\n    immediate: true\n  });\n  // =========================== Hook ===========================\n  var getConfirmFunc = function getConfirmFunc(withFunc) {\n    return function hookConfirm(config) {\n      var _a;\n      uuid += 1;\n      var open = shallowRef(true);\n      var modalRef = shallowRef(null);\n      var configRef = shallowRef(unref(config));\n      var updateConfig = shallowRef({});\n      watch(function () {\n        return config;\n      }, function (val) {\n        updateAction(_extends(_extends({}, isRef(val) ? val.value : val), updateConfig.value));\n      });\n      var destroyAction = function destroyAction() {\n        open.value = false;\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        var triggerCancel = args.some(function (param) {\n          return param && param.triggerCancel;\n        });\n        if (configRef.value.onCancel && triggerCancel) {\n          var _configRef$value;\n          (_configRef$value = configRef.value).onCancel.apply(_configRef$value, [function () {}].concat(_toConsumableArray(args.slice(1))));\n        }\n      };\n      // eslint-disable-next-line prefer-const\n      var closeFunc;\n      var modal = function modal() {\n        return _createVNode(HookModal, {\n          \"key\": \"modal-\".concat(uuid),\n          \"config\": withFunc(configRef.value),\n          \"ref\": modalRef,\n          \"open\": open.value,\n          \"destroyAction\": destroyAction,\n          \"afterClose\": function afterClose() {\n            closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n          }\n        }, null);\n      };\n      closeFunc = (_a = holderRef.value) === null || _a === void 0 ? void 0 : _a.addModal(modal);\n      if (closeFunc) {\n        destroyFns.push(closeFunc);\n      }\n      var updateAction = function updateAction(newConfig) {\n        configRef.value = _extends(_extends({}, configRef.value), newConfig);\n      };\n      var destroy = function destroy() {\n        if (modalRef.value) {\n          destroyAction();\n        } else {\n          actionQueue.value = [].concat(_toConsumableArray(actionQueue.value), [destroyAction]);\n        }\n      };\n      var update = function update(newConfig) {\n        updateConfig.value = newConfig;\n        if (modalRef.value) {\n          updateAction(newConfig);\n        } else {\n          actionQueue.value = [].concat(_toConsumableArray(actionQueue.value), [function () {\n            return updateAction(newConfig);\n          }]);\n        }\n      };\n      return {\n        destroy: destroy,\n        update: update\n      };\n    };\n  };\n  var fns = computed(function () {\n    return {\n      info: getConfirmFunc(withInfo),\n      success: getConfirmFunc(withSuccess),\n      error: getConfirmFunc(withError),\n      warning: getConfirmFunc(withWarn),\n      confirm: getConfirmFunc(withConfirm)\n    };\n  });\n  var holderKey = Symbol('modalHolderKey');\n  return [fns.value, function () {\n    return _createVNode(ElementsHolder, {\n      \"key\": holderKey,\n      \"ref\": holderRef\n    }, null);\n  }];\n}\nexport default useModal;","map":{"version":3,"names":["_extends","_toConsumableArray","createVNode","_createVNode","isRef","unref","computed","defineComponent","shallowRef","watch","withConfirm","withError","withInfo","withSuccess","withWarn","HookModal","destroyFns","uuid","ElementsHolder","name","inheritAttrs","setup","_","_ref","expose","modals","addModal","modal","value","push","slice","filter","currentModal","map","useModal","holderRef","actionQueue","length","cloneQueue","forEach","action","immediate","getConfirmFunc","withFunc","hookConfirm","config","_a","open","modalRef","configRef","updateConfig","val","updateAction","destroyAction","_len","arguments","args","Array","_key","triggerCancel","some","param","onCancel","_configRef$value","apply","concat","closeFunc","afterClose","newConfig","destroy","update","fns","info","success","error","warning","confirm","holderKey","Symbol"],"sources":["D:/Desktop/Code/CcAgSearch/ccso-frontend/node_modules/ant-design-vue/es/modal/useModal/index.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { isRef, unref, computed, defineComponent, shallowRef, watch } from 'vue';\nimport { withConfirm, withError, withInfo, withSuccess, withWarn } from '../confirm';\nimport HookModal from './HookModal';\nimport destroyFns from '../destroyFns';\nvar uuid = 0;\nvar ElementsHolder = defineComponent({\n  name: 'ElementsHolder',\n  inheritAttrs: false,\n  setup: function setup(_, _ref) {\n    var expose = _ref.expose;\n    var modals = shallowRef([]);\n    var addModal = function addModal(modal) {\n      modals.value.push(modal);\n      modals.value = modals.value.slice();\n      return function () {\n        modals.value = modals.value.filter(function (currentModal) {\n          return currentModal !== modal;\n        });\n      };\n    };\n    expose({\n      addModal: addModal\n    });\n    return function () {\n      return modals.value.map(function (modal) {\n        return modal();\n      });\n    };\n  }\n});\nfunction useModal() {\n  var holderRef = shallowRef(null);\n  // ========================== Effect ==========================\n  var actionQueue = shallowRef([]);\n  watch(actionQueue, function () {\n    if (actionQueue.value.length) {\n      var cloneQueue = _toConsumableArray(actionQueue.value);\n      cloneQueue.forEach(function (action) {\n        action();\n      });\n      actionQueue.value = [];\n    }\n  }, {\n    immediate: true\n  });\n  // =========================== Hook ===========================\n  var getConfirmFunc = function getConfirmFunc(withFunc) {\n    return function hookConfirm(config) {\n      var _a;\n      uuid += 1;\n      var open = shallowRef(true);\n      var modalRef = shallowRef(null);\n      var configRef = shallowRef(unref(config));\n      var updateConfig = shallowRef({});\n      watch(function () {\n        return config;\n      }, function (val) {\n        updateAction(_extends(_extends({}, isRef(val) ? val.value : val), updateConfig.value));\n      });\n      var destroyAction = function destroyAction() {\n        open.value = false;\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        var triggerCancel = args.some(function (param) {\n          return param && param.triggerCancel;\n        });\n        if (configRef.value.onCancel && triggerCancel) {\n          var _configRef$value;\n          (_configRef$value = configRef.value).onCancel.apply(_configRef$value, [function () {}].concat(_toConsumableArray(args.slice(1))));\n        }\n      };\n      // eslint-disable-next-line prefer-const\n      var closeFunc;\n      var modal = function modal() {\n        return _createVNode(HookModal, {\n          \"key\": \"modal-\".concat(uuid),\n          \"config\": withFunc(configRef.value),\n          \"ref\": modalRef,\n          \"open\": open.value,\n          \"destroyAction\": destroyAction,\n          \"afterClose\": function afterClose() {\n            closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n          }\n        }, null);\n      };\n      closeFunc = (_a = holderRef.value) === null || _a === void 0 ? void 0 : _a.addModal(modal);\n      if (closeFunc) {\n        destroyFns.push(closeFunc);\n      }\n      var updateAction = function updateAction(newConfig) {\n        configRef.value = _extends(_extends({}, configRef.value), newConfig);\n      };\n      var destroy = function destroy() {\n        if (modalRef.value) {\n          destroyAction();\n        } else {\n          actionQueue.value = [].concat(_toConsumableArray(actionQueue.value), [destroyAction]);\n        }\n      };\n      var update = function update(newConfig) {\n        updateConfig.value = newConfig;\n        if (modalRef.value) {\n          updateAction(newConfig);\n        } else {\n          actionQueue.value = [].concat(_toConsumableArray(actionQueue.value), [function () {\n            return updateAction(newConfig);\n          }]);\n        }\n      };\n      return {\n        destroy: destroy,\n        update: update\n      };\n    };\n  };\n  var fns = computed(function () {\n    return {\n      info: getConfirmFunc(withInfo),\n      success: getConfirmFunc(withSuccess),\n      error: getConfirmFunc(withError),\n      warning: getConfirmFunc(withWarn),\n      confirm: getConfirmFunc(withConfirm)\n    };\n  });\n  var holderKey = Symbol('modalHolderKey');\n  return [fns.value, function () {\n    return _createVNode(ElementsHolder, {\n      \"key\": holderKey,\n      \"ref\": holderRef\n    }, null);\n  }];\n}\nexport default useModal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}