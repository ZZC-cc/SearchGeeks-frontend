{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { useStyleInject } from '../StyleContext';\nimport useHMR from './useHMR';\nimport { onBeforeUnmount, watch, watchEffect, shallowRef } from 'vue';\nexport default function useClientCache(prefix, keyPath, cacheFn, onCacheRemove) {\n  var styleContext = useStyleInject();\n  var fullPathStr = shallowRef('');\n  var res = shallowRef();\n  watchEffect(function () {\n    fullPathStr.value = [prefix].concat(_toConsumableArray(keyPath.value)).join('%');\n  });\n  var HMRUpdate = useHMR();\n  var clearCache = function clearCache(pathStr) {\n    styleContext.value.cache.update(pathStr, function (prevCache) {\n      var _ref = prevCache || [],\n        _ref2 = _slicedToArray(_ref, 2),\n        _ref2$ = _ref2[0],\n        times = _ref2$ === void 0 ? 0 : _ref2$,\n        cache = _ref2[1];\n      var nextCount = times - 1;\n      if (nextCount === 0) {\n        onCacheRemove === null || onCacheRemove === void 0 ? void 0 : onCacheRemove(cache, false);\n        return null;\n      }\n      return [times - 1, cache];\n    });\n  };\n  watch(fullPathStr, function (newStr, oldStr) {\n    if (oldStr) clearCache(oldStr);\n    // Create cache\n    styleContext.value.cache.update(newStr, function (prevCache) {\n      var _ref3 = prevCache || [],\n        _ref4 = _slicedToArray(_ref3, 2),\n        _ref4$ = _ref4[0],\n        times = _ref4$ === void 0 ? 0 : _ref4$,\n        cache = _ref4[1];\n      // HMR should always ignore cache since developer may change it\n      var tmpCache = cache;\n      if (process.env.NODE_ENV !== 'production' && cache && HMRUpdate) {\n        onCacheRemove === null || onCacheRemove === void 0 ? void 0 : onCacheRemove(tmpCache, HMRUpdate);\n        tmpCache = null;\n      }\n      var mergedCache = tmpCache || cacheFn();\n      return [times + 1, mergedCache];\n    });\n    res.value = styleContext.value.cache.get(fullPathStr.value)[1];\n  }, {\n    immediate: true\n  });\n  onBeforeUnmount(function () {\n    clearCache(fullPathStr.value);\n  });\n  return res;\n}","map":{"version":3,"names":["_slicedToArray","_toConsumableArray","useStyleInject","useHMR","onBeforeUnmount","watch","watchEffect","shallowRef","useClientCache","prefix","keyPath","cacheFn","onCacheRemove","styleContext","fullPathStr","res","value","concat","join","HMRUpdate","clearCache","pathStr","cache","update","prevCache","_ref","_ref2","_ref2$","times","nextCount","newStr","oldStr","_ref3","_ref4","_ref4$","tmpCache","process","env","NODE_ENV","mergedCache","get","immediate"],"sources":["D:/Desktop/Code/CcAgSearch/ccso-frontend/node_modules/ant-design-vue/es/_util/cssinjs/hooks/useGlobalCache.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { useStyleInject } from '../StyleContext';\nimport useHMR from './useHMR';\nimport { onBeforeUnmount, watch, watchEffect, shallowRef } from 'vue';\nexport default function useClientCache(prefix, keyPath, cacheFn, onCacheRemove) {\n  var styleContext = useStyleInject();\n  var fullPathStr = shallowRef('');\n  var res = shallowRef();\n  watchEffect(function () {\n    fullPathStr.value = [prefix].concat(_toConsumableArray(keyPath.value)).join('%');\n  });\n  var HMRUpdate = useHMR();\n  var clearCache = function clearCache(pathStr) {\n    styleContext.value.cache.update(pathStr, function (prevCache) {\n      var _ref = prevCache || [],\n        _ref2 = _slicedToArray(_ref, 2),\n        _ref2$ = _ref2[0],\n        times = _ref2$ === void 0 ? 0 : _ref2$,\n        cache = _ref2[1];\n      var nextCount = times - 1;\n      if (nextCount === 0) {\n        onCacheRemove === null || onCacheRemove === void 0 ? void 0 : onCacheRemove(cache, false);\n        return null;\n      }\n      return [times - 1, cache];\n    });\n  };\n  watch(fullPathStr, function (newStr, oldStr) {\n    if (oldStr) clearCache(oldStr);\n    // Create cache\n    styleContext.value.cache.update(newStr, function (prevCache) {\n      var _ref3 = prevCache || [],\n        _ref4 = _slicedToArray(_ref3, 2),\n        _ref4$ = _ref4[0],\n        times = _ref4$ === void 0 ? 0 : _ref4$,\n        cache = _ref4[1];\n      // HMR should always ignore cache since developer may change it\n      var tmpCache = cache;\n      if (process.env.NODE_ENV !== 'production' && cache && HMRUpdate) {\n        onCacheRemove === null || onCacheRemove === void 0 ? void 0 : onCacheRemove(tmpCache, HMRUpdate);\n        tmpCache = null;\n      }\n      var mergedCache = tmpCache || cacheFn();\n      return [times + 1, mergedCache];\n    });\n    res.value = styleContext.value.cache.get(fullPathStr.value)[1];\n  }, {\n    immediate: true\n  });\n  onBeforeUnmount(function () {\n    clearCache(fullPathStr.value);\n  });\n  return res;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}